/*
 * File: app/view/BsePnl.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Ptl.view.BsePnl', {
    extend: 'Ext.container.Viewport',
    alias: 'widget.bsepnl',

    border: false,
    layout: {
        align: 'stretch',
        type: 'vbox'
    },

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'toolbar',
                    border: false,
                    items: [
                        {
                            xtype: 'button',
                            hidden: true,
                            text: 'Dashboard'
                        },
                        {
                            xtype: 'tbfill'
                        },
                        {
                            xtype: 'button',
                            text: 'Sign Off'
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    flex: 1,
                    border: false,
                    id: 'CrdDck',
                    layout: {
                        type: 'card'
                    },
                    bodyBorder: false,
                    items: [
                        {
                            xtype: 'container',
                            border: false,
                            height: 326,
                            layout: {
                                align: 'stretch',
                                type: 'vbox'
                            },
                            items: [
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    border: false,
                                    id: 'QdrTop',
                                    layout: {
                                        align: 'stretch',
                                        type: 'hbox'
                                    },
                                    items: [
                                        {
                                            xtype: 'panel',
                                            flex: 1,
                                            margins: '0 2 2 0 ',
                                            border: false,
                                            height: 313,
                                            id: 'SlsQdrPnl',
                                            layout: {
                                                align: 'stretch',
                                                type: 'vbox'
                                            },
                                            title: 'Sales',
                                            tools: [
                                                {
                                                    xtype: 'tool',
                                                    itemId: 'SlsWdw',
                                                    type: 'maximize'
                                                }
                                            ],
                                            items: [
                                                {
                                                    xtype: 'container',
                                                    height: 25,
                                                    itemId: 'Ttl',
                                                    layout: {
                                                        align: 'stretch',
                                                        pack: 'center',
                                                        type: 'hbox'
                                                    },
                                                    items: [
                                                        {
                                                            xtype: 'label',
                                                            html: '<div style="text-align:center; font:bold 15px arial,sans-serif;">Sales Actual versus Budget</div>',
                                                            id: 'SlsQdrTtl',
                                                            margin: '3 0 0 0'
                                                        },
                                                        {
                                                            xtype: 'combobox',
                                                            itemId: 'BusCde',
                                                            margin: '0 0 0 10',
                                                            width: 147,
                                                            value: [
                                                                'All Business Units'
                                                            ],
                                                            store: [
                                                                'All Business Units',
                                                                'Consumer Goods',
                                                                'Foodservice',
                                                                'Retail'
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'chart',
                                                    flex: 1,
                                                    border: false,
                                                    height: 232,
                                                    id: 'SlsQdr',
                                                    shadow: false,
                                                    animate: true,
                                                    insetPadding: 7,
                                                    store: 'CusInvT1',
                                                    theme: 'Category1',
                                                    axes: [
                                                        {
                                                            type: 'Category',
                                                            fields: [
                                                                'AXSDES1'
                                                            ],
                                                            label: {
                                                                rotate: {
                                                                    degrees: -90
                                                                }
                                                            },
                                                            position: 'bottom'
                                                        },
                                                        {
                                                            type: 'Numeric',
                                                            fields: [
                                                                'AMTHUH'
                                                            ],
                                                            label: {
                                                                renderer: Ext.util.Format.numberRenderer('0,0')
                                                            },
                                                            adjustEnd: false,
                                                            grid: true,
                                                            title: 'Dollars',
                                                            position: 'left'
                                                        }
                                                    ],
                                                    series: [
                                                        {
                                                            type: 'column',
                                                            renderer: function(sprite, record, attributes, index, store) {
                                                                var Clr = attributes.fill;
                                                                var Rcd = store.getAt(Math.floor(index / 1));
                                                                var Idx = index % 1; 

                                                                if (Rcd.get('TYP') == 'Budget') {
                                                                    if (Idx === 0) {
                                                                        Clr = '#ffdd99';  // Orange-CG #f0a50a
                                                                    }
                                                                    else if (Idx === 1) {
                                                                        Clr = '#ff6680';  // Red-FS #c20024
                                                                    }
                                                                    else {
                                                                        Clr = '#7e95e7';  // Blue-RT #2044ba
                                                                    }
                                                                }

                                                                return Ext.apply(attributes, {
                                                                    fill: Clr
                                                                });
                                                            },
                                                            highlight: true,
                                                            tips: {
                                                                trackMouse: true,
                                                                width: 172,
                                                                height: 87,
                                                                padding: 5,
                                                                renderer: function(Rcd, Obj) {
                                                                    var BdgAmt = 0,ActAmt = 0;
                                                                    var BusCde = Ext.getCmp('SlsQdrPnl').down('combobox').getValue();
                                                                    var Mth = Rcd.get('MTHNME');
                                                                    
                                                                    
                                                                    if (Obj.storeItem.data.TYP == 'Budget') {
                                                                        BdgAmt = Obj.value[1];
                                                                        RcdPrv = Rcd.store.getAt(Obj.storeItem.index - 1);
                                                                        if (RcdPrv.get('TYP') == 'Actual') {
                                                                            ActAmt = RcdPrv.get(Obj.yField);
                                                                       }
                                                                    }
                                                                    else {
                                                                        ActAmt = Obj.value[1];
                                                                        RcdNxt = Rcd.store.getAt(Obj.storeItem.index + 1);
                                                                        if (RcdNxt) {
                                                                            BdgAmt = RcdNxt.get(Obj.yField);
                                                                        }
                                                                    }
                                                                    
                                                                    Ttl  = '<table>';
                                                                    Ttl += '<tr><td>BU:&nbsp;</td><td>' + BusCde + '</td></tr>';
                                                                    Ttl += '<tr><td>Month:&nbsp;</td><td>' + Mth + '</td></tr>';
                                                                    Ttl += '<tr><td>Budget:&nbsp;</td><td style="text-align:right">' + Ext.util.Format.currency(BdgAmt,'$',0) + '</td></tr>';
                                                                    if (ActAmt > 0) {
                                                                        Ttl += '<tr><td>Actual:&nbsp;</td><td style="text-align:right">' + Ext.util.Format.currency(ActAmt,'$',0) + '</td></tr>';
                                                                    }
                                                                    Ttl += '</table>';
                                                                    this.setTitle(Ttl);
                                                                }
                                                            },
                                                            title: '[\'Consumer Goods\', \'Foodservice\', \'Retail\']',
                                                            xField: 'AXSDES1',
                                                            yField: 'AMTHUH',
                                                            stacked: true,
                                                            listeners: {
                                                                itemclick: {
                                                                    fn: me.SlsQdrSrsClk,
                                                                    scope: me
                                                                }
                                                            }
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'container',
                                                    height: 25,
                                                    itemId: 'Lgd',
                                                    layout: {
                                                        align: 'stretch',
                                                        pack: 'center',
                                                        type: 'hbox'
                                                    },
                                                    items: [
                                                        {
                                                            xtype: 'container'
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'panel',
                                            flex: 1,
                                            margins: '0 0 2 2',
                                            border: false,
                                            id: 'FinQdrPnl',
                                            title: 'Financials'
                                        }
                                    ]
                                },
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    border: false,
                                    id: 'QdrBtm',
                                    layout: {
                                        align: 'stretch',
                                        type: 'hbox'
                                    },
                                    items: [
                                        {
                                            xtype: 'panel',
                                            flex: 1,
                                            margins: '2 2 0 0',
                                            border: false,
                                            id: 'OprQdrPnl',
                                            title: 'Operations'
                                        },
                                        {
                                            xtype: 'panel',
                                            flex: 1,
                                            margins: '2 0 0 2',
                                            border: false,
                                            id: 'SupQdrPnl',
                                            title: 'Supply Chain'
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            border: false,
                            id: 'SlsPrdPnl',
                            layout: {
                                align: 'stretch',
                                padding: 2,
                                type: 'hbox'
                            },
                            items: [
                                {
                                    xtype: 'container',
                                    flex: 1,
                                    border: false,
                                    width: 260,
                                    resizable: false,
                                    layout: {
                                        type: 'border'
                                    },
                                    items: [
                                        {
                                            xtype: 'tabpanel',
                                            region: 'center',
                                            border: false,
                                            bodyBorder: false,
                                            activeTab: 0,
                                            items: [
                                                {
                                                    xtype: 'panel',
                                                    border: false,
                                                    id: 'prdhiegph',
                                                    layout: {
                                                        align: 'stretch',
                                                        type: 'vbox'
                                                    },
                                                    title: 'Chart',
                                                    tabConfig: {
                                                        xtype: 'tab',
                                                        hidden: true
                                                    },
                                                    items: [
                                                        {
                                                            xtype: 'container',
                                                            height: 20,
                                                            itemId: 'Ttl',
                                                            items: [
                                                                {
                                                                    xtype: 'label',
                                                                    html: '<div style="text-align:center; font:bold 15px arial,sans-serif;">Sales By Product Hierarchy</div>',
                                                                    id: 'SlsPrdTtl'
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'chart',
                                                            flex: 1,
                                                            border: false,
                                                            height: 232,
                                                            id: 'SlsPrd',
                                                            shadow: false,
                                                            animate: true,
                                                            insetPadding: 7,
                                                            store: 'CusInvT2',
                                                            theme: 'Category1',
                                                            axes: [
                                                                {
                                                                    type: 'Category',
                                                                    fields: [
                                                                        'AXSDES2'
                                                                    ],
                                                                    label: {
                                                                        rotate: {
                                                                            degrees: -90
                                                                        }
                                                                    },
                                                                    position: 'bottom'
                                                                },
                                                                {
                                                                    type: 'Numeric',
                                                                    fields: [
                                                                        'AMTCG',
                                                                        'AMTFS',
                                                                        'AMTRT'
                                                                    ],
                                                                    label: {
                                                                        renderer: Ext.util.Format.numberRenderer('0,0')
                                                                    },
                                                                    adjustEnd: false,
                                                                    grid: true,
                                                                    title: 'Dollars',
                                                                    position: 'left'
                                                                }
                                                            ],
                                                            series: [
                                                                {
                                                                    type: 'column',
                                                                    renderer: function(sprite, record, attributes, index, store) {
                                                                        var Clr = attributes.fill;
                                                                        var Rcd = store.getAt(Math.floor(index / 3));
                                                                        var Idx = index % 3; 

                                                                        if (Rcd.get('TYP') == 'Budget') {
                                                                            if (Idx === 0) {
                                                                                Clr = '#ffdd99';  // Orange-CG #f0a50a
                                                                            }
                                                                            else if (Idx === 1) {
                                                                                Clr = '#ff6680';  // Red-FS #c20024
                                                                            }
                                                                            else {
                                                                                Clr = '#7e95e7';  // Blue-RT #2044ba
                                                                            }
                                                                        }

                                                                        return Ext.apply(attributes, {
                                                                            fill: Clr
                                                                        });
                                                                    },
                                                                    highlight: true,
                                                                    title: '[\'Consumer Goods\', \'Foodservice\', \'Retail\']',
                                                                    xField: 'AXSDES2',
                                                                    yField: [
                                                                        'AMTCG',
                                                                        'AMTFS',
                                                                        'AMTRT'
                                                                    ],
                                                                    stacked: true,
                                                                    listeners: {
                                                                        itemclick: {
                                                                            fn: me.SlsQdrSrsClk1,
                                                                            scope: me
                                                                        }
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'container',
                                                            height: 25,
                                                            itemId: 'Lgd',
                                                            margin: 5,
                                                            layout: {
                                                                align: 'stretch',
                                                                type: 'hbox'
                                                            },
                                                            items: [
                                                                {
                                                                    xtype: 'container',
                                                                    flex: 1,
                                                                    itemId: 'CG'
                                                                },
                                                                {
                                                                    xtype: 'container',
                                                                    flex: 1,
                                                                    itemId: 'FS'
                                                                },
                                                                {
                                                                    xtype: 'container',
                                                                    flex: 1,
                                                                    itemId: 'RT'
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'panel',
                                                    border: false,
                                                    id: 'prdhie',
                                                    layout: {
                                                        align: 'stretch',
                                                        type: 'vbox'
                                                    },
                                                    title: 'Product',
                                                    items: [
                                                        {
                                                            xtype: 'gridpanel',
                                                            flex: 1,
                                                            border: false,
                                                            itemId: 'SlsRptPrd',
                                                            store: 'CusInvT3',
                                                            features: [
                                                                {
                                                                    ftype: 'groupingsummary',
                                                                    hideGroupedHeader: true
                                                                }
                                                            ],
                                                            viewConfig: {
                                                                getRowClass: function(record, rowIndex, rowParams, store) {
                                                                    var Cls;
                                                                    var Var = record.get('MTDVAR');

                                                                    if (record.get('PRDATR') == 'ZZZZZ') {
                                                                        Cls = 'hdn-row';
                                                                    }
                                                                    else if (record.get('MTDBUDPRO') === 0) {
                                                                        Cls = 'x-grid-cell';
                                                                    }
                                                                    else if (Var >+ 100) {
                                                                        Cls = 'grn-row';
                                                                    }
                                                                    else if (Var > 90)
                                                                    {
                                                                        Cls = 'ylw-row';
                                                                    }
                                                                    else
                                                                    {
                                                                        Cls = 'red-row';
                                                                    }

                                                                    return Cls;
                                                                },
                                                                border: false
                                                            },
                                                            columns: [
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    dataIndex: 'BUSCDE',
                                                                    text: 'Business Unit',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    dataIndex: 'PRDATRDES',
                                                                    text: 'Attribute',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDACT',
                                                                    groupable: false,
                                                                    text: 'Actual PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDBUDPRO',
                                                                    groupable: false,
                                                                    text: 'Budget PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00%');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        if (value == 9999999) {
                                                                            return '-----';
                                                                        }
                                                                        else {
                                                                            return Ext.util.Format.number(value,'0,000.00%');
                                                                        }
                                                                    },
                                                                    align: 'right',
                                                                    dataIndex: 'MTDVAR',
                                                                    groupable: false,
                                                                    text: 'Variance PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDOOR',
                                                                    groupable: false,
                                                                    text: 'Open Orders (Mo.)',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDTOT',
                                                                    groupable: false,
                                                                    text: 'Actual+Open Orders',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDBUD',
                                                                    groupable: false,
                                                                    text: 'Budget (Mo.)',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDACTPRI',
                                                                    groupable: false,
                                                                    text: 'Actual PY (Mo.)',
                                                                    flex: 1
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'panel',
                                                    border: false,
                                                    id: 'slshie',
                                                    title: 'Sales',
                                                    items: [
                                                        {
                                                            xtype: 'gridpanel',
                                                            border: false,
                                                            itemId: 'SlsRptSls',
                                                            store: 'CusInvT6',
                                                            features: [
                                                                {
                                                                    ftype: 'groupingsummary',
                                                                    hideGroupedHeader: true
                                                                }
                                                            ],
                                                            viewConfig: {
                                                                getRowClass: function(record, rowIndex, rowParams, store) {
                                                                    var Cls;
                                                                    var Var = record.get('MTDVAR');

                                                                    if (record.get('CUSATR') == 'ZZZZZ') {
                                                                        Cls = 'hdn-row';
                                                                    }
                                                                    else if (record.get('MTDBUDPRO') === 0) {
                                                                        Cls = 'x-grid-cell';
                                                                    }
                                                                    else if (Var >+ 100) {
                                                                        Cls = 'grn-row';
                                                                    }
                                                                    else if (Var > 90)
                                                                    {
                                                                        Cls = 'ylw-row';
                                                                    }
                                                                    else
                                                                    {
                                                                        Cls = 'red-row';
                                                                    }

                                                                    return Cls;
                                                                },
                                                                border: false
                                                            },
                                                            columns: [
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    dataIndex: 'BUSCDE',
                                                                    text: 'Business Unit',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    dataIndex: 'CUSATRDES',
                                                                    text: 'Attribute',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDACT',
                                                                    groupable: false,
                                                                    text: 'Actual PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDBUDPRO',
                                                                    groupable: false,
                                                                    text: 'Budget PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00%');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        if (value == 9999999) {
                                                                            return '-----';
                                                                        }
                                                                        else {
                                                                            return Ext.util.Format.number(value,'0,000.00%');
                                                                        }
                                                                    },
                                                                    align: 'right',
                                                                    dataIndex: 'MTDVAR',
                                                                    groupable: false,
                                                                    text: 'Variance PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDOOR',
                                                                    groupable: false,
                                                                    text: 'Open Orders (Mo.)',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDTOT',
                                                                    groupable: false,
                                                                    text: 'Actual+Open Orders',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDBUD',
                                                                    groupable: false,
                                                                    text: 'Budget (Mo.)',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDACTPRI',
                                                                    groupable: false,
                                                                    text: 'Actual PY (Mo.)',
                                                                    flex: 1
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'panel',
                                                    border: false,
                                                    layout: {
                                                        align: 'stretch',
                                                        type: 'vbox'
                                                    },
                                                    title: 'Customer',
                                                    items: [
                                                        {
                                                            xtype: 'gridpanel',
                                                            flex: 1,
                                                            border: false,
                                                            itemId: 'SlsRptCus',
                                                            store: 'CusInvT4',
                                                            features: [
                                                                {
                                                                    ftype: 'groupingsummary',
                                                                    hideGroupedHeader: true
                                                                }
                                                            ],
                                                            viewConfig: {
                                                                getRowClass: function(record, rowIndex, rowParams, store) {
                                                                    var Cls;
                                                                    var Var = record.get('MTDVAR');

                                                                    if (record.get('CUSNBR') == 999999999) {
                                                                        Cls = 'hdn-row';
                                                                    }
                                                                    else if (record.get('MTDBUDPRO') === 0) {
                                                                        Cls = 'x-grid-cell';
                                                                    }
                                                                    else if (Var >+ 100) {
                                                                        Cls = 'grn-row';
                                                                    }
                                                                    else if (Var > 90)
                                                                    {
                                                                        Cls = 'ylw-row';
                                                                    }
                                                                    else
                                                                    {
                                                                        Cls = 'red-row';
                                                                    }

                                                                    return Cls;
                                                                },
                                                                border: false
                                                            },
                                                            columns: [
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    dataIndex: 'BUSCDE',
                                                                    text: 'Business Unit',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    dataIndex: 'CUSNBR',
                                                                    text: 'Customer Number',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        if (record.get('CUSNBR') === 0) {
                                                                            value = 'Undefined Budgetary Customers';
                                                                        }

                                                                        return value;
                                                                    },
                                                                    dataIndex: 'CUSNME',
                                                                    text: 'Customer Name',
                                                                    flex: 1.5
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDACT',
                                                                    groupable: false,
                                                                    text: 'Actual PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDBUDPRO',
                                                                    groupable: false,
                                                                    text: 'Budget PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00%');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        if (value == 9999999) {
                                                                            return '-----';
                                                                        }
                                                                        else {
                                                                            return Ext.util.Format.number(value,'0,000.00%');
                                                                        }
                                                                    },
                                                                    align: 'right',
                                                                    dataIndex: 'MTDVAR',
                                                                    groupable: false,
                                                                    text: 'Variance PTD',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDOOR',
                                                                    groupable: false,
                                                                    text: 'Open Orders (Mo.)',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDTOT',
                                                                    groupable: false,
                                                                    text: 'Actual+Open Orders',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDBUD',
                                                                    groupable: false,
                                                                    text: 'Budget (Mo.)',
                                                                    flex: 1
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    summaryRenderer: function(val, params, data) {
                                                                        return Ext.util.Format.number(val,'0,000.00');
                                                                    },
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        return Ext.util.Format.number(value,'0,000');
                                                                    },
                                                                    summaryType: 'sum',
                                                                    align: 'right',
                                                                    dataIndex: 'MTDACTPRI',
                                                                    groupable: false,
                                                                    text: 'Actual PY (Mo.)',
                                                                    flex: 1
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'form',
                                            margins: '0',
                                            region: 'east',
                                            split: true,
                                            splitterResize: false,
                                            border: false,
                                            id: 'OptFrm',
                                            maxWidth: 247,
                                            minWidth: 247,
                                            width: 247,
                                            layout: {
                                                align: 'stretch',
                                                padding: 5,
                                                type: 'vbox'
                                            },
                                            bodyBorder: false,
                                            animCollapse: false,
                                            collapsible: true,
                                            items: [
                                                {
                                                    xtype: 'fieldset',
                                                    itemId: 'BusCde',
                                                    padding: 10,
                                                    title: 'Business Unit',
                                                    items: [
                                                        {
                                                            xtype: 'checkboxfield',
                                                            name: 'ShwCG',
                                                            boxLabel: 'Consumer Goods'
                                                        },
                                                        {
                                                            xtype: 'checkboxfield',
                                                            name: 'ShwFS',
                                                            boxLabel: 'Foodservice'
                                                        },
                                                        {
                                                            xtype: 'checkboxfield',
                                                            name: 'ShwRT',
                                                            boxLabel: 'Retail'
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'fieldset',
                                                    padding: 10,
                                                    width: 150,
                                                    title: 'Date Range (Month/Year)',
                                                    items: [
                                                        {
                                                            xtype: 'container',
                                                            layout: {
                                                                align: 'stretch',
                                                                type: 'hbox'
                                                            },
                                                            items: [
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 130,
                                                                    fieldLabel: 'Begin',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 35,
                                                                    name: 'BegMth',
                                                                    store: [
                                                                        'January',
                                                                        'February',
                                                                        'March',
                                                                        'April',
                                                                        'May',
                                                                        'June',
                                                                        'July',
                                                                        'August',
                                                                        'September',
                                                                        'October',
                                                                        'November',
                                                                        'December'
                                                                    ]
                                                                },
                                                                {
                                                                    xtype: 'combobox',
                                                                    margins: '0 0 0 5',
                                                                    width: 65,
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 35,
                                                                    name: 'BegYrs',
                                                                    store: [
                                                                        '2011',
                                                                        '2012',
                                                                        '2013',
                                                                        '2014'
                                                                    ]
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'container',
                                                            margin: '5 0 0 0 ',
                                                            layout: {
                                                                align: 'stretch',
                                                                type: 'hbox'
                                                            },
                                                            items: [
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 130,
                                                                    fieldLabel: 'End',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 35,
                                                                    name: 'EndMth',
                                                                    store: [
                                                                        'January',
                                                                        'February',
                                                                        'March',
                                                                        'April',
                                                                        'May',
                                                                        'June',
                                                                        'July',
                                                                        'August',
                                                                        'September',
                                                                        'October',
                                                                        'November',
                                                                        'December'
                                                                    ]
                                                                },
                                                                {
                                                                    xtype: 'combobox',
                                                                    margins: '0 0 0 5',
                                                                    width: 65,
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 35,
                                                                    name: 'EndYrs',
                                                                    store: [
                                                                        '2011',
                                                                        '2012',
                                                                        '2013',
                                                                        '2014'
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'tabpanel',
                                                    itemId: 'HieSel',
                                                    width: 150,
                                                    items: [
                                                        {
                                                            xtype: 'panel',
                                                            padding: 10,
                                                            title: 'Product',
                                                            items: [
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 215,
                                                                    fieldLabel: 'Technology',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 71,
                                                                    name: 'PrdTch',
                                                                    displayField: 'DES',
                                                                    queryMode: 'local',
                                                                    store: 'PTcMst',
                                                                    valueField: 'PRDTCHHIE'
                                                                },
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 215,
                                                                    fieldLabel: 'Group',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 71,
                                                                    name: 'PrdGrp',
                                                                    displayField: 'DES',
                                                                    queryMode: 'local',
                                                                    store: 'PGrMst',
                                                                    valueField: 'PRDGRPHIE'
                                                                },
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 215,
                                                                    fieldLabel: 'Sub-Group',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 70,
                                                                    name: 'PrdSubGrp',
                                                                    displayField: 'DES',
                                                                    queryMode: 'local',
                                                                    store: 'PSbMst',
                                                                    valueField: 'PRDSUBHIE'
                                                                },
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 215,
                                                                    fieldLabel: 'Size',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 71,
                                                                    name: 'PrdSiz',
                                                                    displayField: 'DES',
                                                                    queryMode: 'local',
                                                                    store: 'PSzMst',
                                                                    valueField: 'PRDSIZHIE'
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'panel',
                                                            padding: 10,
                                                            title: 'Sales',
                                                            items: [
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 215,
                                                                    fieldLabel: 'Division',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 71,
                                                                    name: 'DivIdn',
                                                                    displayField: 'DES',
                                                                    queryMode: 'local',
                                                                    store: 'AcMDiv',
                                                                    valueField: 'DIVIDN'
                                                                },
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 215,
                                                                    fieldLabel: 'Segment',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 71,
                                                                    name: 'BusSeg',
                                                                    displayField: 'DES',
                                                                    queryMode: 'local',
                                                                    store: 'AcMSeg',
                                                                    valueField: 'BUSSEG'
                                                                },
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 215,
                                                                    fieldLabel: 'Region',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 70,
                                                                    name: 'RgnCde',
                                                                    displayField: 'DES',
                                                                    queryMode: 'local',
                                                                    store: 'AcMRgn',
                                                                    valueField: 'RGNCDE'
                                                                },
                                                                {
                                                                    xtype: 'combobox',
                                                                    width: 215,
                                                                    fieldLabel: 'Manager',
                                                                    labelSeparator: ' ',
                                                                    labelWidth: 71,
                                                                    name: 'AcMCde',
                                                                    displayField: 'DES',
                                                                    queryMode: 'local',
                                                                    store: 'AcMMgr',
                                                                    valueField: 'ACMCDE'
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'fieldset',
                                                    margins: '10 0 0 0',
                                                    padding: 10,
                                                    title: 'Display Options',
                                                    items: [
                                                        {
                                                            xtype: 'radiogroup',
                                                            items: [
                                                                {
                                                                    xtype: 'radiofield',
                                                                    name: 'DspVlu',
                                                                    boxLabel: 'Gross $',
                                                                    inputValue: 'DspGrs'
                                                                },
                                                                {
                                                                    xtype: 'radiofield',
                                                                    name: 'DspVlu',
                                                                    boxLabel: 'Net $',
                                                                    checked: true,
                                                                    inputValue: 'DspNet'
                                                                },
                                                                {
                                                                    xtype: 'radiofield',
                                                                    name: 'DspVlu',
                                                                    boxLabel: 'Quantity',
                                                                    inputValue: 'DspQty'
                                                                }
                                                            ]
                                                        },
                                                        {
                                                            xtype: 'fieldset',
                                                            hidden: true,
                                                            padding: 10,
                                                            title: 'Chart Display',
                                                            items: [
                                                                {
                                                                    xtype: 'checkboxfield',
                                                                    name: 'ShwAct',
                                                                    boxLabel: 'Actual'
                                                                },
                                                                {
                                                                    xtype: 'container',
                                                                    layout: {
                                                                        align: 'stretch',
                                                                        type: 'hbox'
                                                                    },
                                                                    items: [
                                                                        {
                                                                            xtype: 'checkboxfield',
                                                                            flex: 0.7,
                                                                            name: 'ShwBud',
                                                                            boxLabel: 'Budget'
                                                                        },
                                                                        {
                                                                            xtype: 'checkboxfield',
                                                                            flex: 1,
                                                                            name: 'ProBud',
                                                                            boxLabel: 'Prorate Budget'
                                                                        }
                                                                    ]
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'button',
                                                    itemId: 'DwnLodBtn',
                                                    text: 'Download to Excel'
                                                },
                                                {
                                                    xtype: 'container',
                                                    flex: 1,
                                                    items: [
                                                        {
                                                            xtype: 'container',
                                                            html: '<iframe id="DwnLodFra" name="DwnLodFra" class="x-hidden"></iframe>\r\n<form id="DwnLodFrm" method="post" target="DwnLodFra" /></form>'
                                                        },
                                                        {
                                                            xtype: 'hiddenfield',
                                                            height: 150,
                                                            hidden: false,
                                                            fieldLabel: 'Label',
                                                            name: 'DspPnlFlg'
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    SlsQdrSrsClk: function(Obj) {
        BsePnl.getApplication().getController('SlsPrdCtl').ShwPnl(Obj,'prdhie');

        /*
        var Rcd = Ext.create('BsePnl.model.SlsPrdOpt');
        var Frm = Ext.getCmp('SlsPrdPnl').down('form').getForm();
        var MthFllNme = ['January','February','March','April','May','June','July','August','September','October','November','December'];
        var Yrs = Obj.storeItem.get('YRS');
        var Mth = Obj.storeItem.get('MTH');
        var Typ = Obj.storeItem.get('TYP');
        var BusCde = Ext.getCmp('SlsQdrPnl').down('combobox').getValue();
        var ShwCG = (BusCde == 'Consumer Goods') ? true : false;
        var ShwFS = (BusCde == 'Foodservice') ? true : false;
        var ShwRT = (BusCde == 'Retail') ? true : false;
        var ShwAct = (Typ == 'Actual') ? true : false;
        var ShwBud = (Typ == 'Budget') ? true : false;

        if (BusCde == 'All Business Units') {
        ShwCG = true;
        ShwFS = true;
        ShwRT = true;
        }
        Frm.findField('DspCht').setValue(false);
        Rcd.set('ShwCG',ShwCG);
        Rcd.set('ShwFS',ShwFS);
        Rcd.set('ShwRT',ShwRT);
        Rcd.set('BegMth',MthFllNme[Mth-1]);
        Rcd.set('BegYrs',Yrs);
        Rcd.set('EndMth',MthFllNme[Mth-1]);
        Rcd.set('EndYrs',Yrs);
        Rcd.set('PrdTch','*ALL');
        Rcd.set('DivIdn','*ALL');
        Rcd.set('ShwAct',ShwAct);
        Rcd.set('ShwBud',ShwBud);
        Rcd.set('ProBud',true);
        Frm.loadRecord(Rcd);
        */

        //Ext.getCmp('CrdDck').getLayout().setActiveItem(1);
        //Ext.Function.defer(function() {
        //    Frm.findField('DspCht').setValue(true);
        //    BsePnl.getApplication().getController('SlsPrdCtl').UpdCht(true,true);
        //}, 250, this);

        /*
        var TabNme = 'prdhie';
        Frm.findField('DspCht').setValue(true);
        BsePnl.getApplication().getController('SlsPrdCtl').UpdCht(true,true);

        Ext.getCmp('CrdDck').getLayout().setActiveItem(1);
        Ext.getCmp('SlsPrdPnl').down('tabpanel').setActiveTab(Ext.getCmp(TabNme));

        if (TabNme == 'prdhie') {
        Ext.getCmp('prdhie').tab.show();
        Ext.getCmp('prdhiegph').tab.show();
        Ext.getCmp('slshie').tab.hide();
        }
        else {
        Ext.getCmp('slshie').tab.show();
        Ext.getCmp('prdhie').tab.hide();
        Ext.getCmp('prdhiegph').tab.hide();
        }
        */
    },

    SlsQdrSrsClk1: function(SrsObj) {
        console.log(SrsObj);
    }

});